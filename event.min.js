!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.Event=n()}(this,function(){var t=function(t){return this._events[t]=this._events[t]||[]},n=function(n,e,f,i){for(var o,r,c=t.call(this,e),s=c.length,r=0;r<s;r++)o=c[r],"fire"===n?o.fn.call(o.context,f):"off"===n&&o.fn===f&&o.context===i&&c.splice(r,1);return this},e=function(){this._events={}};return e.prototype={on:function(n,e,f){var i;if("string"==typeof e&&(e=f[e]),"function"==typeof e)return i=t.call(this,n),i.push({fn:e,context:f||this}),this},off:function(t,e,f){return n.call(this,"off",t,e,f)},fire:function(t,e){return n.call(this,"fire",t,e)}},e});